syntax = "proto3";

option go_package = "./gen;vrpc";

service Vrpc { rpc Do(stream BatchReq) returns (stream BatchResp); }

message BatchReq {
  repeated Request requests = 1;
}

message BatchResp {
  repeated Response response = 1;
}

message Request {
  string command = 1;
  bytes  payload = 2;
}

message Response {
  uint32 code    = 1;
  string message = 2;
  bytes  payload = 3;
}